---
layout: post
title: Android AAR
categories: Android
---

### Android 生成 AAR

项目目录中没有 `./gradlew`

`gradle wrapper --gradle-version 7.5.1`

Mac 默认的 gradle 在 `~/.gradle`

`/Users/xxx/.gradle/wrapper/dists/gradle-7.5.1-bin/7jzzequgds1hbszbhq3npc5ng/gradle-7.5.1/bin/gradle`

`./gradlew :unityLibrary:assembleRelease`

将 aar 放入 项目 `project/app/libs` 中

`cp unity-export/unityLibrary/build/outputs/aar/unityLibrary-release.aar /your-android-project/app/libs/
`

### Unity 集成到 Android 后报错

* Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.demo/com.unity3d.player.UnityPlayerActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x0

需要检查 Unity 导出的 unityLibrary模块是否包含资源文件：

```
ls -la unityLibrary/src/main/res/values/
```

必须存在以下文件：

```
strings.xml      # Unity核心字符串资源
colors.xml       # Unity颜色定义
```

在 app/src/main/res/values/strings.xml中手动添加 Unity 必需资源：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Unity 必需的基础字符串 -->
    <string name="unity_activation_loader_class">com.unity3d.player.UnityPlayer</string>
    <string name="unity_build_number">2022.3.60f1</string>
    <string name="app_name">UnityContent</string>
    
    <!-- 其他 Unity 可能需要的资源 -->
    <string name="game_view_content_description">Unity game view</string>
    <string name="unity_cloud_project_id">unity_cloud_project_id_placeholder</string>
</resources>
```
